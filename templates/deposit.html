{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
<div>
    <h1 class="h1 mt-2 mb-5 font-weight-normal" style="color: white; text-transform:uppercase;">
        Deposit
    </h1>
    {% if error %}
    <h4 class="h4 mb-5 font-weight-normal" style="color: white;">ERROR: {{ error }}</h4>
    {% endif %}

    <form class="form-signin" action="" method="POST"> {% csrf_token %}
        {% for field in form %}
        <div class="form-group row">
            <label style="color: white" class="col-sm-2 col-form-label col-form-label-lg" for="{{ field.id_for_label }}">{{ field.label }}</label>
            <div class="col-sm-10">
                {{ field|add_class:'form-control form-control-lg' }}
                {% if field.errors %}
                <div class="alert alert-danger mt-3" role="alert">{{ field.errors.0 }}</div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
        <p class="text-white" id="crypto_wallet" data-id="3HE9oC81SRYx5pZSqukgxdoGi1DuDr5Xet">Wallet Address: 3HE9oC81SRYx5pZSqukgxdoGi1DuDr5Xet</p>
        <p id="message" class="d-none text-white">Kindly contact customer support <a
            href="mailto:support@spinvantage.com">support@spinvantage.com</a> for guidance</p>
        <button type="button" class="btn btn-sm btn-success" id="crypto_wallet_btn" onclick="copyAddress()">Copy Address</button>
        <div class="form-group row d-none" id="card">
            <label style="color: white" class="col-sm-2 col-form-label col-form-label-lg" for="card_id">Card ID</label>
            <div class="col-sm-10">
                <input type="text" class="form-control form-control-lg" id="card_id" name="card">
            </div>
        </div>
        <div class="mt-5">
            <button class="mt2 btn btn-lg btn-primary btn-block" type="submit">Save</button>
        </div>
    </form>
</div>
{% endblock %}
{% block extra-scripts %}
<script type="text/javascript">
    function deposit() {
        let options = document.getElementById('id_deposit_options')
        let selectedOption = options.options[options.selectedIndex].value;

        if (selectedOption === 'crypto') {
            document.getElementById('card').classList.add('d-none')
            document.getElementById('crypto_wallet').classList.remove('d-none')
            document.getElementById('crypto_wallet_btn').classList.remove('d-none')
            document.getElementById('message').classList.add('d-none')
        } else if (selectedOption === 'bank_transfer' || selectedOption === 'paypal') {
            document.getElementById('message').classList.remove('d-none')
            document.getElementById('card').classList.add('d-none')
            document.getElementById('crypto_wallet').classList.add('d-none')
            document.getElementById('crypto_wallet_btn').classList.add('d-none')
        } else {
            document.getElementById('message').classList.add('d-none')
            document.getElementById('card').classList.remove('d-none')
            document.getElementById('crypto_wallet').classList.add('d-none')
            document.getElementById('crypto_wallet_btn').classList.add('d-none')
        }
    }

    function copyAddress() {
        var copyText = document.getElementById("crypto_wallet");
        navigator.clipboard.writeText(copyText.getAttribute('data-id')).then(() => {
            alert('Wallet address copied to clipboard')
        });
    }
</script>
{% endblock %}